<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Agent Catalog: A Primer &#8212; Agent Catalog 0.2.3a1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=50651e91" />
    <link rel="stylesheet" type="text/css" href="_static/basic_mod.css?v=9b2032db" />
    <link rel="stylesheet" type="text/css" href="_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=7230e44a" />
    <script src="_static/documentation_options.js?v=072b7ed8"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.addEventListener("load", () => mermaid.run());
</script>
    <script src="_static/js/theme.js"></script>
    <script src="_static/js/petite-vue.js"></script>
    <link rel="icon" href="_static/favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="agentc Command Documentation" href="cli.html" />
    <link rel="prev" title="Agent Catalog Concepts" href="concept.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    
        <div id="notification_banner" data-banner-hiding="temporary" v-show="!permanentlyHidden">
    <p v-if="visible" id="content">You are viewing documentation for a pre-GA (alpha) version of Couchbase Agent Catalog!</p>
    <a class="close" href="#" @click.prevent="toggleVisible()">[[ visible ? '&#x25B2; HIDE' : '&#x25BC; SHOW BANNER' ]]</a>
</div>

<script>
(function() {
    const topNav = document.querySelector('#top_nav')
    const notificationContent = document.querySelector('#notification_banner p#content').innerText
    const localStorageKey = 'readNotification'
    const bannerHiding = document.querySelector('#notification_banner').dataset['bannerHiding']
    const cssVariableName = '--navbarHeight'
    const rootElement = document.documentElement

    /*************************************************************************/
    // Local storage for remembering if the user has read the notification.

    function checkAlreadyRead() {
        return localStorage.getItem(localStorageKey) == notificationContent
    }

    function setRead() {
        localStorage.setItem(localStorageKey, notificationContent)
    }

    function clearRead() {
        localStorage.removeItem(localStorageKey)
    }

    const alreadyRead = checkAlreadyRead()
    const permanentlyHidden = alreadyRead && bannerHiding == 'permanent'

    /*************************************************************************/
    // Updating a CSS variable so other elements adjust to the nav bar height.

    function updateNavbarHeight() {
        // Only update it if the delta is significant. Otherwise it causes
        // unnecessary browser repaints.
        const documentStyles = getComputedStyle(rootElement)
        // We store the value in REM, so need to convert to pixels
        const currentValue = parseFloat(
            documentStyles.getPropertyValue(cssVariableName)
        ) * parseFloat(documentStyles.fontSize)

        const newValue = topNav.clientHeight

        if (newValue - 5 > currentValue) {
            console.log(`Updating ${cssVariableName} - overlapping`)
            rootElement.style.setProperty(
                cssVariableName, newValue + "px"
            );
        } else if (currentValue - newValue >= 30) {
            console.log(`Updating ${cssVariableName} - gap too large`)
            rootElement.style.setProperty(
                cssVariableName, newValue + "px"
            );
        }
    }

    /*************************************************************************/
    // After loading the page, and resizing the window, recalculate the nav bar
    // height.

    if (!permanentlyHidden) {
        // This height is approximately correct when there's a banner, so
        // shouldn't require any page reflow:
        rootElement.style.setProperty(
            '--navbarHeight', "5.5rem"
        );

        document.addEventListener("DOMContentLoaded", function() {
            updateNavbarHeight()
        });

        var interval = undefined

        window.addEventListener('resize', () => {
            if (interval) {
                clearTimeout(interval)
            }
            interval = setTimeout(() => {
                console.log("Finished resizing")
                updateNavbarHeight()
            }, 100)
        })
    }

    /*************************************************************************/

    PetiteVue.createApp({
        visible: !alreadyRead,
        permanentlyHidden: permanentlyHidden,
        bannerHiding: bannerHiding,
        $delimiters: ['[[', ']]'],
        toggleVisible() {
            this.visible = !this.visible

            if (this.visible) {
                clearRead()
            } else {
                setRead()
            }

            if (!this.visible && bannerHiding == 'permanent') {
                this.permanentlyHidden = true
            }

            // Run this after Vue has had time to update the DOM:
            setTimeout(
                updateNavbarHeight,
                0
            )
        }
    }).mount('#notification_banner')
})()
</script>
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="index.html" title="Go to homepage">Agent Catalog 0.2.3a1 documentation</a></h1>

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="concept.html">Concepts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">agentc CLI Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Package Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="catalog.html">Tool / Prompt Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html">Spans and Log Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Log Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help / Questions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">FAQs</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="agent-catalog-a-primer">
<h1>Agent Catalog: A Primer<a class="headerlink" href="#agent-catalog-a-primer" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>The Agent Catalog project aims to enrich your agent development process by i) providing a consolidated view of tools
and prompts used by your agents and ii) enabling observability with our logging library + Couchbase.
In this short tutorial, we will:</p>
<ol class="arabic simple">
<li><p>Build a set of tools and prompts for a 3-agent application ;</p></li>
<li><p>Use these tools and prompts to realize each agent in LangGraph ; and</p></li>
<li><p>Perform some prompt engineering to improve our application using a Git-backed workflow.</p></li>
</ol>
<p>We assume no prior LangGraph or Agent Catalog experience in this tutorial.
This application is available in full <a class="reference external" href="https://github.com/couchbaselabs/agent-catalog/tree/master/examples/with_langgraph">here</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In a hurry?
Check out our notebook example <a class="reference external" href="https://github.com/couchbaselabs/agent-catalog/tree/master/examples/with_notebook">here</a>
for a slim two-agent network that uses Agent Catalog and LangGraph.</p>
</div>
</section>
<section id="step-0-defining-a-smart-travel-application">
<h2>Step #0: Defining a Smart Travel Application<a class="headerlink" href="#step-0-defining-a-smart-travel-application" title="Link to this heading">¶</a></h2>
<p>To start, let's explain the application we want to build.
We are interested in developing a chatbot that is able to use a structured knowledge base (Couchbase) to answer
routing-related questions.
<em>Agents</em> are actors with agency that interact with an environment and possibly other actors.
We use agents to realize the broad set of tasks representing these &quot;routing-related&quot; questions.
Specifically, in Figure 1 (below) we define an architecture of three agents to handle these questions:</p>
<ol class="arabic simple">
<li><p>&quot;Front Desk&quot; -- Purposed to interact with the user and the &quot;Endpoint Finding&quot; agent.</p></li>
<li><p>&quot;Endpoint Finding&quot; -- Purposed to translate the user's input into IATA airport codes and interact with the
&quot;Route Finding&quot; agent.</p></li>
<li><p>&quot;Route Finding&quot; -- Purposed to find routes (using Couchbase queries) between the endpoints provided by the
&quot;Endpoint Finding&quot; and to i) interact with the &quot;Endpoint Finding&quot; agent to provide new endpoints if no routes are
found or ii) send the routes (or lack of routes) to the &quot;Front Desk&quot; agent to give back to the user.</p></li>
</ol>
<figure class="align-center" id="id1">
<pre  class="mermaid">
        ---
title: 3-Agent Route Finding System
---
%%{init: {'flowchart': {'curve': 'linear', 'defaultRenderer': 'elk'}}}%%
graph BT
;
    __start__([&lt;p&gt;__start__&lt;/p&gt;]):::first
    front_desk_agent(front_desk_agent)
    endpoint_finding_agent(endpoint_finding_agent)
    route_finding_agent(route_finding_agent)
    __end__([&lt;p&gt;__end__&lt;/p&gt;]):::last
    __start__ --&gt; front_desk_agent;
    endpoint_finding_agent --&gt; route_finding_agent;
    front_desk_agent -. ENDPOINT_FINDING .-&gt; endpoint_finding_agent;
front_desk_agent -. END .-&gt; __end__;
route_finding_agent -. FRONT_DESK .-&gt; front_desk_agent;
route_finding_agent -. ENDPOINT_FINDING .-&gt; endpoint_finding_agent;
front_desk_agent -. FRONT_DESK .-&gt; front_desk_agent;
classDef default fill:#f2f0ff, line-height: 1.2
classDef first fill-opacity:0
classDef last fill: #bfb6fc
    </pre><figcaption>
<p><span class="caption-text"><strong>Figure 1</strong>: The 3-agent system (a Front Desk agent, a Route Finding agent, and an Endpoint Finding
agent) we will be working with.</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>To hold all of the code we will write in the following sections, we'll need a place to put everything.
Specifically, we'll need a Git repository and a Python environment.
Copy and paste the commands below to get started:</p>
<div class="highlight-ansi-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>init
<span class="gp">$ </span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
<span class="gp">$ </span><span class="nb">source</span><span class="w"> </span>venv/bin/activate
<span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>agentc<span class="o">[</span>langchain,langgraph<span class="o">]</span>
</pre></div>
</div>
<p>To initialize Agent Catalog, provide your Couchbase connection details and run <code class="docutils literal notranslate"><span class="pre">agentc</span> <span class="pre">init</span></code>.
You can also save these to a <code class="docutils literal notranslate"><span class="pre">.env</span></code> file and <code class="docutils literal notranslate"><span class="pre">agentc</span></code> will read these values accordingly.</p>
<div class="highlight-ansi-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">AGENT_CATALOG_CONN_STRING</span><span class="o">=</span>...
<span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">AGENT_CATALOG_USERNAME</span><span class="o">=</span>...
<span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">AGENT_CATALOG_PASSWORD</span><span class="o">=</span>...
<span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">AGENT_CATALOG_BUCKET</span><span class="o">=</span>...
<span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">AGENT_CATALOG_CONN_ROOT_CERTIFICATE</span><span class="o">=</span>...
<span class="gp">$ </span>agentc<span class="w"> </span>init
</pre></div>
</div>
</section>
<section id="step-1-building-agent-tools-and-prompts">
<h2>Step #1: Building Agent Tools and Prompts<a class="headerlink" href="#step-1-building-agent-tools-and-prompts" title="Link to this heading">¶</a></h2>
<section id="building-our-agent-prompts">
<h3>Building Our Agent Prompts<a class="headerlink" href="#building-our-agent-prompts" title="Link to this heading">¶</a></h3>
<p>Having defined the problem we want to solve, let's now detail the individual actions each agent should take.
Agents are realized by <em>prompting</em> large language models like GPT-4o.
In Agent Catalog, prompts are authored in YAML with (at a minimum) a name, a description, and content.
We describe the prompt for each agent below.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Front Desk Agent Prompt</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">record_kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prompt</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">front_desk_node</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">  </span><span class="no">All inputs required to assemble the front-desk node.</span>

<span class="nt">output</span><span class="p">:</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ResponseOrShouldContinue</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">The response to the user&#39;s input and whether (or not)</span>
<span class="w">    </span><span class="no">the conversation should continue.</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">  </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">is_last_step</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Whether</span><span class="nv"> </span><span class="s">(or</span><span class="nv"> </span><span class="s">not)</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">conversation</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">continue.&quot;</span>
<span class="w">    </span><span class="nt">response</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">response</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">user&#39;s</span><span class="nv"> </span><span class="s">input.&quot;</span>
<span class="w">    </span><span class="nt">needs_clarification</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Whether</span><span class="nv"> </span><span class="s">(or</span><span class="nv"> </span><span class="s">not)</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">response</span><span class="nv"> </span><span class="s">needs</span><span class="nv"> </span><span class="s">clarification.&quot;</span>
<span class="w">  </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">should_continue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">response</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">needs_clarification</span><span class="w"> </span><span class="p p-Indicator">]</span>

<span class="nt">content</span><span class="p">:</span>
<span class="w">  </span><span class="nt">agent_instructions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">      </span><span class="no">Your task is to respond to the user AND decide if the conversation</span>
<span class="w">      </span><span class="no">should end based on the user&#39;s response.</span>
<span class="w">      </span><span class="no">If you have any routes that have been given to by another agent,</span>
<span class="w">      </span><span class="no">respond to the user in Markdown illustrating the routes.</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">      </span><span class="no">If the user asks for help with flight planning but there are no</span>
<span class="w">      </span><span class="no">source and destination cities provided, set the</span>
<span class="w">      </span><span class="no">&#39;needs_clarification&#39; field to True and provide a polite response.</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">      </span><span class="no">If the user asks / replies with anything not related to flight</span>
<span class="w">      </span><span class="no">planning, set the &#39;is_last_step&#39; field to True and</span>
<span class="w">      </span><span class="no">&#39;needs_clarification&#39; to True.</span>
<span class="w">      </span><span class="no">DO NOT continue the conversation if the user&#39;s input / response is</span>
<span class="w">      </span><span class="no">not related to flight planning.</span>
<span class="w">      </span><span class="no">For example, the following responses should end the conversation</span>
<span class="w">      </span><span class="no">(set &#39;is_last_step&#39; to True):</span>
<span class="w">      </span><span class="no">- I need help with my hotel reservation. ==&gt; is_last_step: True</span>
<span class="w">      </span><span class="no">- Can you help me with my car rental? ==&gt; is_last_step: True</span>
<span class="w">      </span><span class="no">- I need recommendations for restaurants in the area.</span>
<span class="w">        </span><span class="no">==&gt; is_last_step: True</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">      </span><span class="no">If the user wants to end the conversation, set the &#39;is_last_step&#39;</span>
<span class="w">      </span><span class="no">field to True and provide a polite response.</span>
<span class="w">      </span><span class="no">For example:</span>
<span class="w">      </span><span class="no">- Thanks! That&#39;s all I need. ==&gt; is_last_step: True</span>
<span class="w">      </span><span class="no">- I&#39;m done for now. ==&gt; is_last_step: True</span>
<span class="w">      </span><span class="no">- That&#39;s all for today. ==&gt; is_last_step: True</span>

<span class="w">  </span><span class="nt">output_format_instructions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">Be polite and professional in your responses.</span>
<span class="w">    </span><span class="no">Err on the side of caution when deciding whether to continue the</span>
<span class="w">    </span><span class="no">conversation.</span>
<span class="w">    </span><span class="no">If you are unsure, it is better to **END** the conversation than</span>
<span class="w">    </span><span class="no">to continue it.</span>
</pre></div>
</div>
<p class="sd-card-text">Note that our <code class="docutils literal notranslate"><span class="pre">content</span></code> field is an object with two objects: <code class="docutils literal notranslate"><span class="pre">agent_instructions</span></code> and
<code class="docutils literal notranslate"><span class="pre">output_format_instructions</span></code>.
The former is a YAML list of four strings while the latter describes instructions for formatting its response.
The practice of &quot;prompt engineering&quot; in the context of agents entails meticulously evolving this
<code class="docutils literal notranslate"><span class="pre">agent_instructions</span></code> field.
As we will later see, prompt engineering is closely related with problem specification.
An ill-defined specification leads to sub-optimal performance, but it is unreasonable to ask for a well defined
specification upfront.
This process of prompt evolution needs to be seamless and provenance-respecting, which Agent Catalog enables.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">Frameworks like CrewAI may possess their own set of templates with variables that must be bound (e.g.,
<code class="docutils literal notranslate"><span class="pre">instructions</span></code>, <code class="docutils literal notranslate"><span class="pre">persona</span></code>, <code class="docutils literal notranslate"><span class="pre">examples</span></code>, etc...).
<code class="docutils literal notranslate"><span class="pre">content</span></code> can include any arbitrary collection of fields that can later be used to interface with any
framework.
To use our prebuilt LangGraph integration libraries, adding <code class="docutils literal notranslate"><span class="pre">agent_instructions</span></code> and
<code class="docutils literal notranslate"><span class="pre">output_format_instructions</span></code> allows us (Agent Catalog) to properly map these fields to LangGraph's
<code class="docutils literal notranslate"><span class="pre">langgraph.prebuilt.create_react_agent</span></code>.</p>
</div>
<p class="sd-card-text">In addition to the <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">description</span></code>, and <code class="docutils literal notranslate"><span class="pre">content</span></code> fields, we also specify an <code class="docutils literal notranslate"><span class="pre">output</span></code> field in our
prompt.
LLMs that support structured responses / guided decoding allow developers like us to make our applications more
robust.
For our front desk agent, we mandate that its output contain a) a flag denoting whether or not the conversation
should end, b) the response the agent should give (if any), and c) a flag denoting whether the agent must ask the
user for more clarification.
This output field is expressed in JSON schema (using YAML).</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Endpoint Finding Agent Prompt</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">record_kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prompt</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">endpoint_finding_node</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">  </span><span class="no">All inputs required to assemble the endpoint-finding node.</span>

<span class="nt">output</span><span class="p">:</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Endpoints</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The source and destination airports for a flight / route.</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">  </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">source</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">IATA</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">source</span><span class="nv"> </span><span class="s">airport.&quot;</span>
<span class="w">    </span><span class="nt">dest</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">IATA</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">destination</span><span class="nv"> </span><span class="s">airport.&quot;</span>
<span class="w">  </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">source</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">dest</span><span class="p p-Indicator">]</span>

<span class="nt">content</span><span class="p">:</span>
<span class="w">  </span><span class="nt">agent_instructions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">Your task is to find the source and destination airports for a flight.</span>
<span class="w">    </span><span class="no">The user will provide you with the source and destination cities.</span>
<span class="w">    </span><span class="no">You need to find the IATA codes for the source and destination airports.</span>
<span class="w">    </span><span class="no">Another agent will use these IATA codes to find a route between the two</span>
<span class="w">    </span><span class="no">airports.</span>
<span class="w">    </span><span class="no">If a route cannot be found, suggest alternate airports (preferring</span>
<span class="w">    </span><span class="no">airports that are more likely to have routes between them).</span>

<span class="w">  </span><span class="nt">output_format_instructions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">Ensure that each IATA code is a string and is capitalized.</span>
</pre></div>
</div>
<p class="sd-card-text">Again, our <code class="docutils literal notranslate"><span class="pre">content</span></code> field is an object with two objects: <code class="docutils literal notranslate"><span class="pre">agent_instructions</span></code> and
<code class="docutils literal notranslate"><span class="pre">output_format_instructions</span></code>.
The former describes directions the agent must take to find the source and destination airports.
Finally, for our endpoint finding agent, we mandate that its output is an object with <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">dest</span></code>
fields.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Route Finding Agent Prompt</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">record_kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prompt</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">route_finding_node</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">  </span><span class="no">All inputs required to assemble the route-finding node.</span>

<span class="nt">tools</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;find_direct_routes_between_airports&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;finding</span><span class="nv"> </span><span class="s">indirect</span><span class="nv"> </span><span class="s">flights</span><span class="nv"> </span><span class="s">(those</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">layovers)&quot;</span>
<span class="w">    </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="nt">output</span><span class="p">:</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Routes</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">A list of a sequence of flights (source and destinations) that connect</span>
<span class="w">    </span><span class="no">two airports.</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">  </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">routes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="w">      </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">        </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">          </span><span class="nt">source</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">IATA</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">source</span><span class="nv"> </span><span class="s">airport.&quot;</span>
<span class="w">          </span><span class="nt">dest</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">IATA</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">destination</span><span class="nv"> </span><span class="s">airport.&quot;</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">source</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">dest</span><span class="w"> </span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">is_last_step</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">Whether the agent should continue to find routes between new source</span>
<span class="w">        </span><span class="no">and destination cities.</span>
<span class="w">  </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">routes</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">is_last_step</span><span class="w"> </span><span class="p p-Indicator">]</span>

<span class="nt">content</span><span class="p">:</span>
<span class="w">  </span><span class="nt">agent_instructions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">      </span><span class="no">Your task is to use the provided tools to find a route that connects</span>
<span class="w">      </span><span class="no">the source and destination airports.</span>
<span class="w">      </span><span class="no">You will be given the source and destination cities.</span>
<span class="w">      </span><span class="no">You MUST use the provided tools.</span>
<span class="w">      </span><span class="no">Use routes with fewer layovers (e.g., if a direct flight and a</span>
<span class="w">      </span><span class="no">one-layover flight exists, choose the direct flight).</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">      </span><span class="no">If no routes exist, return an empty list.</span>
<span class="w">      </span><span class="no">You will then be given new source and destination cities to find</span>
<span class="w">      </span><span class="no">routes between.</span>
<span class="w">      </span><span class="no">If you cannot find a route after the second attempt, set the</span>
<span class="w">      </span><span class="no">`is_last_step` flag to True.</span>

<span class="w">  </span><span class="nt">output_format_instructions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">Ensure that each IATA code is a string and is capitalized for all</span>
<span class="w">    </span><span class="no">routes returned.</span>
</pre></div>
</div>
<p class="sd-card-text">Compared to our endpoint finding agent prompt and our front desk agent prompt, our route finding agent prompt
possesses an additional field: <code class="docutils literal notranslate"><span class="pre">tools</span></code>.
Prompts in Agent Catalog optionally specify a set of <strong>tools</strong> (discussed in detail in the following section) to be
associated with.
The first tool, <code class="docutils literal notranslate"><span class="pre">find_direct_routes_between_airports</span></code>, is specified directly by name.
The next two tools are specified indirecty with a semantically similar query string: &quot;finding indirect flights
those with layovers)&quot;.
If prompt authors are unaware of the full set of tools available to them (as is the case for large agent
applications), they can estimate the exact tools they need within the prompt itself.</p>
</div>
</details></section>
<section id="building-our-agent-tools">
<h3>Building Our Agent Tools<a class="headerlink" href="#building-our-agent-tools" title="Link to this heading">¶</a></h3>
<p>Tools are the &quot;hands&quot; of agent systems, enabling agents to (essentially) invoke functions.
In practice, this dependency is inverted -- applications invoke functions that an agent &quot;calls&quot;.
Consequently, these tools are typically defined within the application itself.
In Agent Catalog, there are four tool classes: Python tools, semantic search tools, SQL++ query tools, and HTTP
request tools.
Below, we describe each of our tools.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Find Direct Routes Tool (SQL++)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*
name: find_direct_routes_between_airports
description: &gt;
    Find a list of direct routes between two airports using source_airport
    and destination_airport.
input:
    type: object
    properties:
      source_airport:
        type: string
      destination_airport:
        type: string

secrets:
    - couchbase:
        conn_string: CB_CONN_STRING
        username: CB_USERNAME
        password: CB_PASSWORD
        # certificate: CB_CERTIFICATE
*/
FROM
    `travel-sample`.inventory.route r
WHERE
    r.sourceairport = $source_airport AND
    r.destinationairport = $destination_airport
SELECT VALUE {
    &quot;airlines&quot;     : [ r.airline ],
    &quot;layovers&quot;     : [],
    &quot;from_airport&quot; : r.sourceairport,
    &quot;to_airport&quot;   : r.destinationairport
}
LIMIT
    10;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">Note the use of named parameters <code class="docutils literal notranslate"><span class="pre">$source_airport</span></code> and <code class="docutils literal notranslate"><span class="pre">$destination_airport</span></code> in the SQL++ query itself.</p>
</div>
<p class="sd-card-text">Tools require metadata to instruct our agent on the tool's use.
In SQL++ tools, this metadata is captured in a multi-line comment containing a YAML block with the <code class="docutils literal notranslate"><span class="pre">name</span></code>,
<code class="docutils literal notranslate"><span class="pre">description</span></code>, an <code class="docutils literal notranslate"><span class="pre">input</span></code> type and a <code class="docutils literal notranslate"><span class="pre">secrets</span></code> block.</p>
<p class="sd-card-text"><code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">description</span></code> are self-explanatory (these fields refer to the same concepts from our prompts).
<code class="docutils literal notranslate"><span class="pre">input</span></code> describes the named parameters used by the SQL++ query.
This description is expressed in JSON schema (using YAML).
For this tool, the named parameters <code class="docutils literal notranslate"><span class="pre">$source_airport</span></code> and <code class="docutils literal notranslate"><span class="pre">$destination_airport</span></code> correspond to the
<code class="docutils literal notranslate"><span class="pre">source_airport</span></code> and <code class="docutils literal notranslate"><span class="pre">destination_airport</span></code> string fields described in <code class="docutils literal notranslate"><span class="pre">input</span></code>.
The <code class="docutils literal notranslate"><span class="pre">couchbase</span></code> object inside the <code class="docutils literal notranslate"><span class="pre">secrets</span></code> list describes the keys that correspond to the connection details
used to execute the query.
In most cases, you shouldn't need to modify this field from the template -- you'll just need to make sure that
<code class="docutils literal notranslate"><span class="pre">CB_CONN_STRING</span></code>, <code class="docutils literal notranslate"><span class="pre">CB_USERNAME</span></code>, and <code class="docutils literal notranslate"><span class="pre">CB_PASSWORD</span></code> are environment variables that are set.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p class="sd-card-text"><code class="docutils literal notranslate"><span class="pre">CB_CONN_STRING</span></code>, <code class="docutils literal notranslate"><span class="pre">CB_USERNAME</span></code>, and <code class="docutils literal notranslate"><span class="pre">CB_PASSWORD</span></code> are distinct from <code class="docutils literal notranslate"><span class="pre">AGENT_CATALOG_CONN_STRING</span></code>,
<code class="docutils literal notranslate"><span class="pre">AGENT_CATALOG_USERNAME</span></code>, and <code class="docutils literal notranslate"><span class="pre">AGENT_CATALOG_PASSWORD</span></code>!
In this example, you'll need to set both (even if Agent Catalog and the travel sample reside in the same
cluster).</p>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Find Indirect Routes Tools (Python)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">We could describe the remaining tools using the SQL++ tool format, but for teaching purposes we will author the
remaining tools in Python.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span> <span class="o">=</span> <span class="n">couchbase</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">Cluster</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CB_CONN_STRING&quot;</span><span class="p">),</span>
    <span class="n">couchbase</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">ClusterOptions</span><span class="p">(</span>
        <span class="n">authenticator</span><span class="o">=</span><span class="n">couchbase</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">PasswordAuthenticator</span><span class="p">(</span>
            <span class="n">username</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CB_USERNAME&quot;</span><span class="p">),</span>
            <span class="n">password</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CB_PASSWORD&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="nd">@agentc</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">tool</span>
<span class="k">def</span><span class="w"> </span><span class="nf">find_one_layover_flights</span><span class="p">(</span>
    <span class="n">source_airport</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">destination_airport</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find all one-layover (indirect) flights between two airports.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            FROM</span>
<span class="sd">                `travel-sample`.inventory.route r1,</span>
<span class="sd">                `travel-sample`.inventory.route r2</span>
<span class="sd">            WHERE</span>
<span class="sd">                r1.sourceairport = $source_airport AND</span>
<span class="sd">                r1.destinationairport = r2.sourceairport AND</span>
<span class="sd">                r2.destinationairport = $destination_airport</span>
<span class="sd">            SELECT VALUE {</span>
<span class="sd">                &quot;airlines&quot;     : [r1.airline, r2.airline],</span>
<span class="sd">                &quot;layovers&quot;     : [r1.destinationairport],</span>
<span class="sd">                &quot;from_airport&quot; : r1.sourceairport,</span>
<span class="sd">                &quot;to_airport&quot;   : r2.destinationairport</span>
<span class="sd">            }</span>
<span class="sd">            LIMIT</span>
<span class="sd">                10;</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">couchbase</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">QueryOptions</span><span class="p">(</span>
            <span class="n">named_parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;source_airport&quot;</span><span class="p">:</span> <span class="n">source_airport</span><span class="p">,</span>
                <span class="s2">&quot;destination_airport&quot;</span><span class="p">:</span> <span class="n">destination_airport</span>
            <span class="p">}</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">rows</span><span class="p">():</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>


<span class="nd">@agentc</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">tool</span>
<span class="k">def</span><span class="w"> </span><span class="nf">find_two_layover_flights</span><span class="p">(</span>
    <span class="n">source_airport</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">destination_airport</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find all two-layover (indirect) flights between two airports.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            FROM</span>
<span class="sd">                `travel-sample`.inventory.route r1,</span>
<span class="sd">                `travel-sample`.inventory.route r2,</span>
<span class="sd">                `travel-sample`.inventory.route r3</span>
<span class="sd">            WHERE</span>
<span class="sd">                r1.sourceairport = $source_airport AND</span>
<span class="sd">                r1.destinationairport = r2.sourceairport AND</span>
<span class="sd">                r2.destinationairport = r3.sourceairport AND</span>
<span class="sd">                r3.destinationairport = $destination_airport</span>
<span class="sd">            SELECT VALUE {</span>
<span class="sd">                &quot;airlines&quot;     : [r1.airline, r2.airline, r3.airline],</span>
<span class="sd">                &quot;layovers&quot;     : [r1.destinationairport],</span>
<span class="sd">                &quot;from_airport&quot; : r1.sourceairport,</span>
<span class="sd">                &quot;to_airport&quot;   : r3.destinationairport</span>
<span class="sd">            }</span>
<span class="sd">            LIMIT</span>
<span class="sd">                10;</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">couchbase</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">QueryOptions</span><span class="p">(</span>
            <span class="n">named_parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;source_airport&quot;</span><span class="p">:</span> <span class="n">source_airport</span><span class="p">,</span>
                <span class="s2">&quot;destination_airport&quot;</span><span class="p">:</span> <span class="n">destination_airport</span>
            <span class="p">}</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">rows</span><span class="p">():</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div>
<p class="sd-card-text">Python tools are Python functions that are decorated with the <code class="code highlight python docutils literal highlight-python"><span class="n">agentc</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">tool</span></code> decorator.
By default, the function's name (here, <code class="code highlight python docutils literal highlight-python"><span class="n">find_one_layover_flights</span></code> and <code class="code highlight python docutils literal highlight-python"><span class="n">find_two_layover_flights</span></code>)
and the function's docstring (the triple-quoted string immediately under the function signature) are used to
populate the decorator's <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">description</span></code> fields, though these can also be explicitly specified by using
<code class="code highlight python docutils literal highlight-python"><span class="n">agentc</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">tool</span><span class="p">(</span><span class="n">name</span><span class="o">=...</span><span class="p">,</span> <span class="n">description</span><span class="o">=...</span><span class="p">)</span></code>.</p>
<p class="sd-card-text">The arguments of each function (<code class="docutils literal notranslate"><span class="pre">source_airport</span></code> and <code class="docutils literal notranslate"><span class="pre">destination_airport</span></code>) must be appropriately typed for the
agent to correctly invoke the function.
Similar to the <code class="docutils literal notranslate"><span class="pre">find_direct_routes_between_airports</span></code> tool, both fields are string-valued.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">In general, it is good practice to also attach return types for your functions (here, <code class="code highlight python docutils literal highlight-python"><span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span></code>)
-- but this is not a strict requirement for our agent to invoke the function.</p>
</div>
</div>
</details></section>
<section id="using-agent-catalog">
<h3>Using Agent Catalog<a class="headerlink" href="#using-agent-catalog" title="Link to this heading">¶</a></h3>
<p>LLMs, and by extension agents, are very sensitive to their initial conditions (e.g., the prompt text, a tool's name,
etc...).
For agent developers like us, using a tried-and-true versioning system like Git is essential to adequately capturing
these initial conditions for reproducibility down-the-line.
This example comes with a post-commit hook (see <code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code>) that we will install using the command
below:</p>
<div class="highlight-ansi-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pre-commit<span class="w"> </span>install<span class="w"> </span>--hook-type<span class="w"> </span>post-commit
</pre></div>
</div>
<p>If you have set the correct environment variables (or populated <code class="docutils literal notranslate"><span class="pre">.env</span></code> appropriately), all we need to do now is
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> the prompts and tools we just authored and commit them with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.
Behind the scenes, <code class="docutils literal notranslate"><span class="pre">agentc</span> <span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">agentc</span> <span class="pre">publish</span></code> will run to index these tools and prompts to a
local catalog file and to your Couchbase instance.</p>
<p>Assuming that you have placed your tools in a <code class="docutils literal notranslate"><span class="pre">tools</span></code> folder and your prompts in a <code class="docutils literal notranslate"><span class="pre">prompts</span></code> folder, run the
commands below to commit your files to Git and to index + publish your artifacts.</p>
<div class="highlight-ansi-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>*<span class="w"> </span><span class="p">;</span><span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.gitignore<span class="w"> </span>.env.example<span class="w"> </span>.pre-commit-config.yaml
<span class="gp">$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Initial commit&quot;</span>
</pre></div>
</div>
<p>Finally, to use our tools and prompts in an application, we'll just need to create an <code class="code highlight python docutils literal highlight-python"><span class="n">agentc</span><span class="o">.</span><span class="n">Catalog</span></code> instance
and call the <code class="docutils literal notranslate"><span class="pre">find</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">agentc</span>

<span class="c1"># AGENT_CATALOG_CONN_STRING, AGENT_CATALOG_USERNAME, and AGENT_PASSWORD</span>
<span class="c1"># must be set as environment variables or passed as parameters here.</span>
<span class="n">catalog</span> <span class="o">=</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Catalog</span><span class="p">()</span>

<span class="c1"># Grab a tool by name.</span>
<span class="n">tool</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;tool&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;find_direct_routes_between_airports&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool</span><span class="o">.</span><span class="n">func</span><span class="p">({</span><span class="s2">&quot;source_airport&quot;</span><span class="p">:</span> <span class="s2">&quot;SFO&quot;</span><span class="p">,</span> <span class="s2">&quot;destination_airport&quot;</span><span class="p">:</span> <span class="s2">&quot;LAX&quot;</span><span class="p">}))</span>

<span class="c1"># Grab a prompt by name.</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;prompt&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;endpoint_finding_node&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">prompt</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

<span class="c1"># Use the tool specified in the prompt.</span>
<span class="n">tool_from_prompt</span> <span class="o">=</span> <span class="n">prompt</span><span class="o">.</span><span class="n">tools</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">func</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool_from_prompt</span><span class="p">({</span>
    <span class="s2">&quot;source_airport&quot;</span><span class="p">:</span> <span class="s2">&quot;SFO&quot;</span><span class="p">,</span>
    <span class="s2">&quot;destination_airport&quot;</span><span class="p">:</span> <span class="s2">&quot;LAX&quot;</span><span class="p">,</span>
<span class="p">}))</span>
</pre></div>
</div>
<p>In addition to tracking the initial conditions of our agents, we are also interested in intuiting the exact
circumstances that led to an agent's output.
To support observability with Git-backed reproducibility, Agent Catalog supports &quot;Span&quot;-based logging.
For developers using LangGraph or LlamaIndex, Agent Catalog Spans work behind the scenes to log all agent activity to a
local file and to Couchbase.
For users interested in using Spans directly, <code class="docutils literal notranslate"><span class="pre">Span</span></code> objects are created from <code class="docutils literal notranslate"><span class="pre">Catalog</span></code> instances:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">catalog</span> <span class="o">=</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Catalog</span><span class="p">()</span>
<span class="n">my_span</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">Span</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_span&quot;</span><span class="p">)</span>

<span class="c1"># See the docs for examples on how to use me!</span>
<span class="n">my_span</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world!&quot;</span><span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="step-2-building-agents-with-langgraph">
<h2>Step #2: Building Agents with LangGraph<a class="headerlink" href="#step-2-building-agents-with-langgraph" title="Link to this heading">¶</a></h2>
<p>At this point, we have not touched LangGraph -- and that's important to note!
There are many agent frameworks available for you to use, but most (if not all) require tools and prompts.
Agent Catalog is intended to be <strong>framework-agnostic</strong>.
To handle the orchestration of our agents for this example, we will use LangGraph.</p>
<p>The LangGraph core does not have a notion of &quot;agents&quot;.
LangGraph instead uses <em>nodes</em> and <em>edges</em>.
Loosely inspired by the Pregel model, all nodes within the same graph accept &quot;state&quot; and return &quot;state&quot; for other nodes
to use.
In most cases, state will minimally consist of the graph's history (e.g., what the user asked, what an agent responded
with, etc...).
For our agent, we add three extra fields to our state (extending the helper <code class="docutils literal notranslate"><span class="pre">agentc_langgraph.agent.State</span></code> class):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># From the agentc_langgraph.agent.State class:</span>
<span class="c1"># messages: list[langchain_core.messages.BaseMessage]</span>
<span class="c1"># is_last_step: bool</span>
<span class="c1"># previous_node: typing.Optional[list[str]]</span>
<span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">agentc_langgraph</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">State</span><span class="p">):</span>
    <span class="n">needs_clarification</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">endpoints</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span>
    <span class="n">routes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span>
</pre></div>
</div>
<p>We will describe how this state is used in the implementation of our agents (realized using LangGraph nodes) below.
Each agent below sub-classes a helper &quot;ReAct&quot; agent that removes some boilerplate for Agent Catalog to interface
with LangGraph's built-in ReAct agent.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Front Desk Agent (Node)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">talk_to_user</span><span class="p">(</span>
    <span class="n">span</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Span</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">requires_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
    <span class="c1"># We use &quot;Assistant&quot; to differentiate between the</span>
    <span class="c1"># &quot;internal&quot; AI messages and what the user sees.</span>
    <span class="n">span</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">agentc</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">AssistantContent</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">message</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">requires_response</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&gt; Assistant: &quot;</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;&gt; User: &quot;</span><span class="p">)</span>
        <span class="n">span</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">agentc</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">UserContent</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">response</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">response</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&gt; Assistant: &quot;</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">FrontDeskAgent</span><span class="p">(</span><span class="n">agentc_langgraph</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">ReActAgent</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">catalog</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Catalog</span><span class="p">,</span>
        <span class="n">span</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Span</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">chat_model</span> <span class="o">=</span> <span class="n">langchain_openai</span><span class="o">.</span><span class="n">chat_models</span><span class="o">.</span><span class="n">ChatOpenAI</span><span class="p">(</span>
            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">chat_model</span><span class="o">=</span><span class="n">chat_model</span><span class="p">,</span>
            <span class="n">catalog</span><span class="o">=</span><span class="n">catalog</span><span class="p">,</span>
            <span class="n">span</span><span class="o">=</span><span class="n">span</span><span class="p">,</span>
            <span class="n">prompt_name</span><span class="o">=</span><span class="s2">&quot;front_desk_node&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_invoke</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">span</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Span</span><span class="p">,</span>
        <span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">langchain_core</span><span class="o">.</span><span class="n">runnables</span><span class="o">.</span><span class="n">RunnableConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># This is the first message in the conversation.</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">talk_to_user</span><span class="p">(</span>
                <span class="n">span</span><span class="p">,</span>
                <span class="s2">&quot;Please provide the source and destination airports.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">langchain_core</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">HumanMessage</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">response</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Display the last message in our conversation to our user.</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">talk_to_user</span><span class="p">(</span><span class="n">span</span><span class="p">,</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">langchain_core</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">HumanMessage</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">response</span><span class="p">))</span>

        <span class="c1"># Give the working state to our &quot;agent&quot; (in this case, just an LLM call).</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">agentc_langchain</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">Callback</span><span class="p">(</span>
            <span class="n">span</span><span class="o">=</span><span class="n">span</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">prompt</span><span class="o">.</span><span class="n">output</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chat_model</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
        <span class="n">chat_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chat_model</span><span class="o">.</span><span class="n">with_structured_output</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prompt</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="n">structured_response</span> <span class="o">=</span> <span class="n">chat_model</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">],</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># &#39;is_last_step&#39; and &#39;response&#39; comes from the prompt&#39;s output format.</span>
        <span class="c1"># Note this is a direct mutation on the &quot;state&quot; given to the Span!</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">langchain_core</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">AIMessage</span><span class="p">(</span>
            <span class="n">structured_response</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">])</span>
        <span class="p">)</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;is_last_step&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">structured_response</span><span class="p">[</span><span class="s2">&quot;is_last_step&quot;</span><span class="p">]</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;needs_clarification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">structured_response</span><span class="p">[</span><span class="s2">&quot;needs_clarification&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;is_last_step&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_talk_to_user</span><span class="p">(</span>
                <span class="n">span</span><span class="p">,</span>
                <span class="n">structured_response</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">],</span>
                <span class="n">requires_response</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">state</span>
</pre></div>
</div>
<p class="sd-card-text">Outside of our agent we define a <code class="code highlight python docutils literal highlight-python"><span class="n">talk_to_user</span></code> tool, which interfaces with the user through the console
and records user + assistant activity to an Agent Catalog <code class="code highlight python docutils literal highlight-python"><span class="n">Span</span></code> instance.</p>
<p class="sd-card-text">Starting with our constructor, the prompt we specified earlier is retrieved by name with
<code class="code highlight python docutils literal highlight-python"><span class="n">prompt_name</span><span class="o">=</span><span class="s2">&quot;front_desk_node&quot;</span></code>.
For this example, we are using <code class="docutils literal notranslate"><span class="pre">gpt-4o</span></code> but any LangChain-compatible chat model can be used here.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">Note that we pass an OpenAI chat model instance (specifically, <code class="docutils literal notranslate"><span class="pre">gpt-4o</span></code> with <code class="code highlight python docutils literal highlight-python"><span class="n">temperature</span><span class="o">=</span><span class="mi">0</span></code>) to the
parent class.
This is one of many initial conditions that would not be captured if we versioned only our prompts!</p>
</div>
<p class="sd-card-text">Child classes of <code class="code highlight python docutils literal highlight-python"><span class="n">agentc_langgraph</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">ReActAgent</span></code> must also implement the <code class="code highlight python docutils literal highlight-python"><span class="n">_invoke</span></code> method, which
handles the invocation of our LLM and how to mutate the input <code class="code highlight python docutils literal highlight-python"><span class="n">State</span></code> instance for use by other agents.
Our front desk agent always starts with a pre-canned message when first interacting with a user, but will invoke
our LLM containing our message history for all subsequent responses.
To actually log our responses, the <code class="code highlight python docutils literal highlight-python"><span class="n">agentc_langgraph</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">Callback</span></code> is used with the working <code class="code highlight python docutils literal highlight-python"><span class="n">span</span></code>
and <code class="code highlight python docutils literal highlight-python"><span class="bp">self</span><span class="o">.</span><span class="n">chat_model</span></code> instances.</p>
<p class="sd-card-text">After the LLM invocation, we mutate the <code class="code highlight python docutils literal highlight-python"><span class="n">state</span></code> object to:</p>
<ol class="arabic simple">
<li><p class="sd-card-text">Add the LLM's output to our conversational history list, <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;messages&quot;</span></code>;</p></li>
<li><p class="sd-card-text">Set the <code class="code highlight python docutils literal highlight-python"><span class="n">is_last_step</span></code> and <code class="code highlight python docutils literal highlight-python"><span class="n">needs_clarification</span></code> flags from the LLM's structured response
(according to the output type defined in the prompt); and</p></li>
<li><p class="sd-card-text">Responds to the user if <code class="code highlight python docutils literal highlight-python"><span class="n">is_last_step</span></code> is raised.</p></li>
</ol>
<p class="sd-card-text">Once our <code class="code highlight python docutils literal highlight-python"><span class="n">state</span></code> object has been modified, we emit our state for other agents (or more accurately, nodes)
to use in their <code class="code highlight python docutils literal highlight-python"><span class="n">_invoke</span></code> method.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Endpoint Finding Agent (Node)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">EndpointFindingAgent</span><span class="p">(</span><span class="n">agentc_langgraph</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">ReActAgent</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">catalog</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Catalog</span><span class="p">,</span> <span class="n">span</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Span</span><span class="p">):</span>
        <span class="n">chat_model</span> <span class="o">=</span> <span class="n">langchain_openai</span><span class="o">.</span><span class="n">chat_models</span><span class="o">.</span><span class="n">ChatOpenAI</span><span class="p">(</span>
            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">chat_model</span><span class="o">=</span><span class="n">chat_model</span><span class="p">,</span>
            <span class="n">catalog</span><span class="o">=</span><span class="n">catalog</span><span class="p">,</span>
            <span class="n">span</span><span class="o">=</span><span class="n">span</span><span class="p">,</span>
            <span class="n">prompt_name</span><span class="o">=</span><span class="s2">&quot;endpoint_finding_node&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_invoke</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">span</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Span</span><span class="p">,</span>
        <span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">langchain_core</span><span class="o">.</span><span class="n">runnables</span><span class="o">.</span><span class="n">RunnableConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
        <span class="c1"># Give the working state to our agent.</span>
        <span class="n">agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_react_agent</span><span class="p">(</span><span class="n">span</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">state</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>

        <span class="c1"># &#39;source&#39; and &#39;dest&#39; comes from the prompt&#39;s output format.</span>
        <span class="c1"># Note this is a direct mutation on the &quot;state&quot; given to the Span!</span>
        <span class="n">structured_response</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;structured_response&quot;</span><span class="p">]</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;endpoints&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">structured_response</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
            <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="n">structured_response</span><span class="p">[</span><span class="s2">&quot;dest&quot;</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">state</span>
</pre></div>
</div>
<p class="sd-card-text">The endpoint finding agent is much simpler than our front desk agent (with respect to implementation).
Again, using the output type defined in our prompt, we set the source and destination of our state to be the
<code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;source&quot;</span></code> and <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;dest&quot;</span></code> fields of the LLM's structured response.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Route Finding Agent (Node)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">RouteFindingAgent</span><span class="p">(</span><span class="n">agentc_langgraph</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">ReActAgent</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">catalog</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Catalog</span><span class="p">,</span>
        <span class="n">span</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Span</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">chat_model</span> <span class="o">=</span> <span class="n">langchain_openai</span><span class="o">.</span><span class="n">chat_models</span><span class="o">.</span><span class="n">ChatOpenAI</span><span class="p">(</span>
            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span>
        <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">chat_model</span><span class="o">=</span><span class="n">chat_model</span><span class="p">,</span>
            <span class="n">catalog</span><span class="o">=</span><span class="n">catalog</span><span class="p">,</span>
            <span class="n">span</span><span class="o">=</span><span class="n">span</span><span class="p">,</span>
            <span class="n">prompt_name</span><span class="o">=</span><span class="s2">&quot;route_finding_node&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_invoke</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">span</span><span class="p">:</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Span</span><span class="p">,</span>
        <span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">langchain_core</span><span class="o">.</span><span class="n">runnables</span><span class="o">.</span><span class="n">RunnableConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
        <span class="c1"># Give the working state to our agent.</span>
        <span class="n">agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_react_agent</span><span class="p">(</span><span class="n">span</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">state</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>

        <span class="c1"># We will only attach the last message to our state.</span>
        <span class="c1"># Note this is a direct mutation on the &quot;state&quot; given to the Span!</span>
        <span class="n">structured_response</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;structured_response&quot;</span><span class="p">]</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;routes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">structured_response</span><span class="p">[</span><span class="s2">&quot;routes&quot;</span><span class="p">]</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;is_last_step&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">structured_response</span><span class="p">[</span><span class="s2">&quot;is_last_step&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">state</span>
</pre></div>
</div>
<p class="sd-card-text">The route finding agent is also relatively simple (compared to our front desk agent).
Using the output type defined in our prompt, we set the routes and the <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;is_last_step&quot;</span></code> flag of our state
using the LLM's structured response.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Travel Application Graph</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">catalog</span> <span class="o">=</span> <span class="n">agentc</span><span class="o">.</span><span class="n">Catalog</span><span class="p">()</span>
<span class="n">span</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">Span</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;root_span&quot;</span><span class="p">)</span>
<span class="n">workflow</span> <span class="o">=</span> <span class="n">langgraph</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">To start, we create a <code class="code highlight python docutils literal highlight-python"><span class="n">langgraph</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">StateGraph</span></code> instance that accepts the <code class="code highlight python docutils literal highlight-python"><span class="n">State</span></code> <em>class</em> above.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">front_desk_agent</span> <span class="o">=</span> <span class="n">FrontDeskAgent</span><span class="p">(</span><span class="n">catalog</span><span class="p">,</span> <span class="n">span</span><span class="p">)</span>
<span class="n">endpoint_finding_agent</span> <span class="o">=</span> <span class="n">EndpointFindingAgent</span><span class="p">(</span><span class="n">catalog</span><span class="p">,</span> <span class="n">span</span><span class="p">)</span>
<span class="n">route_finding_agent</span> <span class="o">=</span> <span class="n">RouteFindingAgent</span><span class="p">(</span><span class="n">catalog</span><span class="p">,</span> <span class="n">span</span><span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;front_desk_agent&quot;</span><span class="p">,</span> <span class="n">front_desk_agent</span><span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;endpoint_finding_agent&quot;</span><span class="p">,</span> <span class="n">endpoint_finding_agent</span><span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;route_finding_agent&quot;</span><span class="p">,</span> <span class="n">route_finding_agent</span><span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">set_entry_point</span><span class="p">(</span><span class="s2">&quot;front_desk_agent&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">Next we add our nodes to our graph.
The first argument of the <code class="code highlight python docutils literal highlight-python"><span class="n">add_node</span></code> method is a node ID (in this case, the name of the variable bound to
each agent).
The second argument of the <code class="code highlight python docutils literal highlight-python"><span class="n">add_node</span></code> method is the agent itself (more generally, any callable object).
The last line with <code class="code highlight python docutils literal highlight-python"><span class="n">set_entry_point</span></code> marks our front desk agent as the first node to run when the graph is
invoked.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">out_front_desk_edge</span><span class="p">(</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;endpoint_finding_agent&quot;</span><span class="p">,</span> <span class="s2">&quot;front_desk_agent&quot;</span><span class="p">,</span> <span class="s2">&quot;__end__&quot;</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;is_last_step&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">langgraph</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">END</span>
    <span class="k">elif</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;needs_clarification&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">&quot;front_desk_agent&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;endpoint_finding_agent&quot;</span>


<span class="k">def</span><span class="w"> </span><span class="nf">out_route_finding_edge</span><span class="p">(</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;front_desk_agent&quot;</span><span class="p">,</span> <span class="s2">&quot;endpoint_finding_agent&quot;</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;routes&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;is_last_step&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">&quot;front_desk_agent&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;endpoint_finding_agent&quot;</span>

<span class="n">workflow</span><span class="o">.</span><span class="n">add_conditional_edges</span><span class="p">(</span>
    <span class="s2">&quot;front_desk_agent&quot;</span><span class="p">,</span>
    <span class="n">out_front_desk_edge</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">&quot;endpoint_finding_agent&quot;</span><span class="p">,</span> <span class="s2">&quot;route_finding_agent&quot;</span><span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">add_conditional_edges</span><span class="p">(</span>
    <span class="s2">&quot;route_finding_agent&quot;</span><span class="p">,</span>
    <span class="n">out_route_finding_edge</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">Last but not least, we need to connect our nodes together using edges.
Outgoing edges in LangGraph are functions that accept an input <code class="code highlight python docutils literal highlight-python"><span class="n">state</span></code> (of the same type used by our nodes)
and return the name of node that this <code class="code highlight python docutils literal highlight-python"><span class="n">state</span></code> should be forwarded to.
The front desk agent has three outgoing edges:</p>
<ol class="arabic simple">
<li><p class="sd-card-text">to the terminal <code class="code highlight python docutils literal highlight-python"><span class="n">__end__</span></code> node if <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;is_last_step&quot;</span></code> is raised, which stops the graph computation;</p></li>
<li><p class="sd-card-text">back to itself if <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;needs_clarification&quot;</span></code> is raised; and</p></li>
<li><p class="sd-card-text">to the endpoint finding agent for all other instances of <code class="code highlight python docutils literal highlight-python"><span class="n">state</span></code>.</p></li>
</ol>
<p class="sd-card-text">The endpoint finding agent unconditionally moves to the route finding agent (thus the use of <code class="code highlight python docutils literal highlight-python"><span class="n">add_edge</span></code>
instead of <code class="code highlight python docutils literal highlight-python"><span class="n">add_condition_edges</span></code>).
The route finding agent has two outgoing edges:</p>
<ol class="arabic simple">
<li><p class="sd-card-text">to the front desk agent if <code class="code highlight python docutils literal highlight-python"><span class="n">routes</span></code> is set or if our route finding agent has raised the
<code class="code highlight python docutils literal highlight-python"><span class="n">is_last_step</span></code> flag itself; and</p></li>
<li><p class="sd-card-text">back to the endpoint finding agent for all other instances of <code class="code highlight python docutils literal highlight-python"><span class="n">state</span></code>.</p></li>
</ol>
<p class="sd-card-text">Finally, to see our graph in action, we compile and call the <code class="code highlight python docutils literal highlight-python"><span class="n">invoke</span></code> method of our graph:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
<span class="n">span</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;endpoints&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s2">&quot;routes&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s2">&quot;needs_clarification&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;is_last_step&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">span</span><span class="p">:</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">span</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="step-3-iteratively-improving-our-agent">
<h2>Step #3: Iteratively Improving our Agent<a class="headerlink" href="#step-3-iteratively-improving-our-agent" title="Link to this heading">¶</a></h2>
<p>In this section, we will illustrate how you can &quot;tune&quot; your agent system in an ad-hoc (but provenance-capturing) manner.</p>
<p>To start, let's find a route from SFO to LAX.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt; Assistant: Please provide the source and destination airports.

&gt; User: I want to go to LA. I am in the north bay area.

&gt; Assistant: Here are the direct flight options from the North Bay Area to Los Angeles:
  **From Charles M. Schulz–Sonoma County Airport (STS) to Los Angeles International Airport (LAX):**
  - Alaska Airlines (AS)
  - American Airlines (AA)

  **From San Francisco International Airport (SFO) to Los Angeles International Airport (LAX):**
  - Alaska Airlines (AS)
  - Delta Airlines (DL)
  - United Airlines (UA)
  - US Airways (US)
  - Virgin America (VX)
  - Southwest Airlines (WN)
  - American Airlines (AA)

  **From Oakland International Airport (OAK) to Los Angeles International Airport (LAX):**
  - Delta Airlines (DL)
  - AirTran Airways (FL)
  - Southwest Airlines (WN)

  You have several options to choose from, depending on your preferred airport and airline. Let me know if you
  need further assistance with booking or additional information!

&gt; User: That&#39;s all, thanks

&gt; Assistant: You&#39;re welcome! If you have any more questions in the future, feel free to ask. Have a great trip
  to LA!
</pre></div>
</div>
<p>Next, let's try a set of endpoints that requires one layover.
Specifically, we want a route from Canyonlands Field Airport (IATA <code class="docutils literal notranslate"><span class="pre">'CNY'</span></code>) to LAX.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt; Assistant: Please provide the source and destination airports.

&gt; User: i want to go to LAX from Canyonlands Field Airport

&gt; Assistant: To travel from Canyonlands Field Airport (CNY) to Los Angeles International Airport (LAX), you will
  likely need to book a connecting flight, as there may not be direct flights available. You can check with
  airlines that operate from CNY for available routes and connections. Additionally, consider checking travel
  websites or consulting with a travel agent to find the best options for your trip.
</pre></div>
</div>
<p>This is <strong>not</strong> a correct response -- and the culprit lies with our &quot;Front Desk&quot; agent incorrectly assuming the
user input is not relevant to route planning.</p>
<ol class="arabic">
<li><p>To fix this, let us modify our prompt.
Open the file <code class="docutils literal notranslate"><span class="pre">prompts/front_desk.yaml</span></code> and uncomment the item at the very bottom of the
<code class="docutils literal notranslate"><span class="pre">content</span> <span class="pre">--&gt;</span> <span class="pre">agent_instructions</span></code> list:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">  </span><span class="no">If the user asks for flights / routes from obscure or small airports, DO NOT assume that no routes exist.</span>
<span class="w">  </span><span class="no">Let another agent decide this, not you.</span>
<span class="w">  </span><span class="no">In this case, set the is_last_step to False.</span>
</pre></div>
</div>
</li>
<li><p>Next, we will create a new commit that captures this change.</p>
<div class="highlight-ansi-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>prompts/front_desk.yaml
<span class="gp">$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Fixing front desk agent.&quot;</span>
</pre></div>
</div>
</li>
<li><p>Now, let us try the same input again with our agent system.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt; Assistant: Please provide the source and destination airports.

&gt; User: i want to go to LAX from Canyonlands Field Airport

&gt; Assistant: There are no direct flights from Canyonlands Field Airport (CNY) to Los Angeles International
  Airport (LAX). However, there are several one-layover flights available with a stop in Salt Lake City (SLC).
  Here are the options:

   1. **Delta Airlines (DL) to Alaska Airlines (AS)** with a layover in SLC.
   2. **Delta Airlines (DL) to Delta Airlines (DL)** with a layover in SLC.
   3. **Delta Airlines (DL) to KLM (KL)** with a layover in SLC.
   4. **Delta Airlines (DL) to United Airlines (UA)** with a layover in SLC.
   5. **Delta Airlines (DL) to US Airways (US)** with a layover in SLC.
   6. **Delta Airlines (DL) to Southwest Airlines (WN)** with a layover in SLC.
   7. **Delta Airlines (DL) to American Airlines (AA)** with a layover in SLC.

  You can choose any of these options based on your preference for airlines and schedule.

&gt; User: that&#39;s all, thanks

&gt; Assistant: You&#39;re welcome! If you have any more questions in the future, feel free to reach out.
  Safe travels!
</pre></div>
</div>
<p>...and it seems our fix has worked!</p>
</li>
</ol>
<p>To conclude this section, users of Agent Catalog are expected (and encouraged) to make small changes like this
frequently and ad-hoc (like we did here).
When we move past this ad-hoc testing to more qualitative and structured evaluation, the role Agent Catalog plays is
further magnified (see the example source <a class="reference external" href="https://github.com/couchbaselabs/agent-catalog/tree/master/examples/with_langgraph/evals">here</a>
for how built in testing frameworks like <code class="code highlight python docutils literal highlight-python"><span class="n">pytest</span></code> are used to facilitate an evaluation environment).
Git-backed versioning allows agent developers to seamlessly switch between agent versions using Git commands (see <a class="reference external" href="faqs.html#git-versioning-questions">here</a>
for guidance on using Git for this).</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&lt;</span><span>Page contents</span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&gt;</span><span>Page contents:</span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Agent Catalog: A Primer</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#step-0-defining-a-smart-travel-application">Step #0: Defining a Smart Travel Application</a></li>
<li><a class="reference internal" href="#step-1-building-agent-tools-and-prompts">Step #1: Building Agent Tools and Prompts</a><ul>
<li><a class="reference internal" href="#building-our-agent-prompts">Building Our Agent Prompts</a></li>
<li><a class="reference internal" href="#building-our-agent-tools">Building Our Agent Tools</a></li>
<li><a class="reference internal" href="#using-agent-catalog">Using Agent Catalog</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-2-building-agents-with-langgraph">Step #2: Building Agents with LangGraph</a></li>
<li><a class="reference internal" href="#step-3-iteratively-improving-our-agent">Step #3: Iteratively Improving our Agent</a></li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="concept.html">
                    <span class="icon">&lt;</span><span>Agent Catalog Concepts</span></a>
                
            </div>

            <div class="right">
                
                    <a href="cli.html"><span><code class="docutils literal notranslate"><span class="pre">agentc</span></code> Command Documentation</span><span class="icon">&gt;</span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Couchbase.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>