

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agent Catalog Record Entries &mdash; Agent Catalog v0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/autodoc_pydantic.css" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=f0df55be" />

  
    <link rel="shortcut icon" href="_static/favicon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2fea6348"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Frequently Asked Questions" href="faqs.html" />
    <link rel="prev" title="Agent Catalog Environment Variables" href="env.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Agent Catalog
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Getting Agent Catalog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#building-from-package">Building From Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#building-from-source-with-pip">Building From Source (with pip)</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#building-from-source-with-poetry">Building From Source (with Poetry)</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#verifying-your-installation">Verifying Your Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">Agent Catalog User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide.html#metrics-driven-development">Metrics Driven Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide.html#couchbase-backed-agent-catalogs">Couchbase-Backed Agent Catalogs</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide.html#assessing-agent-quality">Assessing Agent Quality</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Tool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli.html#agentc">agentc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-add">add</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-clean">clean</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-env">env</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-execute">execute</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-find">find</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-index">index</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-publish">publish</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-status">status</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#agentc-version">version</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Agent Catalog API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#agentc.Auditor"><code class="docutils literal notranslate"><span class="pre">Auditor</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.agent_name"><code class="docutils literal notranslate"><span class="pre">Auditor.agent_name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.auditor_output"><code class="docutils literal notranslate"><span class="pre">Auditor.auditor_output</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.bucket"><code class="docutils literal notranslate"><span class="pre">Auditor.bucket</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.catalog"><code class="docutils literal notranslate"><span class="pre">Auditor.catalog</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.certificate"><code class="docutils literal notranslate"><span class="pre">Auditor.certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.conn_string"><code class="docutils literal notranslate"><span class="pre">Auditor.conn_string</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.llm_model_name"><code class="docutils literal notranslate"><span class="pre">Auditor.llm_model_name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.password"><code class="docutils literal notranslate"><span class="pre">Auditor.password</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.username"><code class="docutils literal notranslate"><span class="pre">Auditor.username</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.accept"><code class="docutils literal notranslate"><span class="pre">Auditor.accept()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Auditor.move"><code class="docutils literal notranslate"><span class="pre">Auditor.move()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html#agentc.Provider"><code class="docutils literal notranslate"><span class="pre">Provider</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.bucket"><code class="docutils literal notranslate"><span class="pre">Provider.bucket</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.catalog"><code class="docutils literal notranslate"><span class="pre">Provider.catalog</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.conn_string"><code class="docutils literal notranslate"><span class="pre">Provider.conn_string</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.decorator"><code class="docutils literal notranslate"><span class="pre">Provider.decorator</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.password"><code class="docutils literal notranslate"><span class="pre">Provider.password</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.provider_output"><code class="docutils literal notranslate"><span class="pre">Provider.provider_output</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.refiner"><code class="docutils literal notranslate"><span class="pre">Provider.refiner</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.secrets"><code class="docutils literal notranslate"><span class="pre">Provider.secrets</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.snapshot"><code class="docutils literal notranslate"><span class="pre">Provider.snapshot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.tool_model"><code class="docutils literal notranslate"><span class="pre">Provider.tool_model</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.username"><code class="docutils literal notranslate"><span class="pre">Provider.username</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.get_prompt_for"><code class="docutils literal notranslate"><span class="pre">Provider.get_prompt_for()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.get_tools_for"><code class="docutils literal notranslate"><span class="pre">Provider.get_tools_for()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#agentc.Provider.version"><code class="docutils literal notranslate"><span class="pre">Provider.version</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html#agentc.langchain.audit"><code class="docutils literal notranslate"><span class="pre">audit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="env.html">Environment Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="env.html#mandatory-environment-variables">Mandatory Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="env.html#optional-environment-variables">Optional Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">On Catalog Entries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tool-catalog-records">Tool Catalog Records</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-function-tools">Python Function Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sql-query-tools">SQL++ Query Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#semantic-search-tools">Semantic Search Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#http-request-tools">HTTP Request Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#prompt-catalog-records">Prompt Catalog Records</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#raw-prompts">Raw Prompts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jinja-templated-prompts">Jinja Templated Prompts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#which-couchbase-capella-or-server-version-should-i-use">Which Couchbase Capella or Server version should I use?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#what-does-agent-catalog-add-to-my-couchbase-bucket">What does Agent Catalog add to my Couchbase bucket?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#what-is-agent-catalog-doing-when-i-run-agentc-index">What is Agent Catalog doing when I run <code class="docutils literal notranslate"><span class="pre">agentc</span> <span class="pre">index</span></code>?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#how-do-i-roll-back-to-a-previous-catalog-version">How do I roll back to a previous catalog version?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#what-environment-variables-are-required-to-use-agent-catalog">What environment variables are required to use Agent Catalog?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#what-are-the-different-types-of-tools-and-prompts-i-can-create">What are the different types of tools and prompts I can create?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#can-i-write-multiple-tools-prompts-in-one-file">Can I write multiple tools/prompts in one file?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#do-cli-commands-need-to-be-executed-in-a-certain-order">Do CLI commands need to be executed in a certain order?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#can-i-index-and-publish-catalogs-programmatically">Can I index and publish catalogs programmatically?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#does-agent-catalog-require-an-openai-api-key">Does Agent Catalog require an OpenAI API key?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#does-agent-catalog-work-with-any-llm">Does Agent Catalog work with any LLM?</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Agent Catalog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Agent Catalog Record Entries</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/entry.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="agent-catalog-record-entries">
<h1>Agent Catalog Record Entries<a class="headerlink" href="#agent-catalog-record-entries" title="Link to this heading"></a></h1>
<p>As of date, Agent Catalog supports six different types of records (four types of tools, two types of prompts).</p>
<section id="tool-catalog-records">
<h2>Tool Catalog Records<a class="headerlink" href="#tool-catalog-records" title="Link to this heading"></a></h2>
<p>Tools are explicit actions that an agent can take to accomplish a task.
Agent Catalog currently supports four types of tools: Python function tools, SQL++ query tools, semantic search tools,
and HTTP request tools.</p>
<section id="python-function-tools">
<h3>Python Function Tools<a class="headerlink" href="#python-function-tools" title="Link to this heading"></a></h3>
<p>The most generic tool is the Python function tool, which is associated with a function in <cite>.py</cite> file.
To signal to Agent Catalog that you want to mark a function as a tool, you must use the <cite>&#64;tool</cite> decorator.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># The following file is a template for a Python tool.</span>
<span class="c1">#</span>
<span class="kn">from</span> <span class="nn">agentc</span> <span class="kn">import</span> <span class="n">tool</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="c1"># Although Python uses duck-typing, the specification of models greatly improves the response quality of LLMs.</span>
<span class="c1"># It is highly recommended that all tools specify the models of their bound functions using Pydantic or dataclasses.</span>
<span class="k">class</span> <span class="nc">SalesModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">input_sources</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">sales_formula</span><span class="p">:</span> <span class="nb">str</span>


<span class="c1"># Only functions decorated with &quot;tool&quot; will be indexed.</span>
<span class="c1"># All other functions / module members will be ignored by the indexer.</span>
<span class="nd">@tool</span>
<span class="k">def</span> <span class="nf">compute_sales_for_this_week</span><span class="p">(</span><span class="n">sales_model</span><span class="p">:</span> <span class="n">SalesModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A description for the function bound to the tool. This is mandatory for tools.&quot;&quot;&quot;</span>

    <span class="c1"># The implementation of the tool (given below) is *not* indexed.</span>
    <span class="c1"># The indexer only cares about the name, function signature, and description.</span>
    <span class="k">return</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="mf">0.99</span> <span class="o">+</span> <span class="mf">2.00</span> <span class="o">%</span> <span class="mf">6.0</span>


<span class="c1"># You can also specify the name and description of the tool explicitly, as well as any annotations you wish to attach.</span>
<span class="nd">@tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;compute_sales_for_the_month&quot;</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sales&quot;</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">compute_sales_for_the_month</span><span class="p">(</span><span class="n">sales_model</span><span class="p">:</span> <span class="n">SalesModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A description for the function bound to the tool. This is mandatory for tools.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="mf">0.99</span> <span class="o">+</span> <span class="mf">2.00</span> <span class="o">%</span> <span class="mf">6.0</span>
</pre></div>
</div>
</section>
<section id="sql-query-tools">
<h3>SQL++ Query Tools<a class="headerlink" href="#sql-query-tools" title="Link to this heading"></a></h3>
<p>SQL++ is the query language used by Couchbase to interact with the data stored in the cluster.
To create a SQL++ query tool, you must author a <code class="docutils literal notranslate"><span class="pre">.sqlpp</span></code> file with a header that details various metadata.
If you are importing an existing SQL++ query, simply prepend the header to the query.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>--
-- The following file is a template for a (Couchbase) SQL++ query tool.
--

-- All SQL++ query tools are specified using a valid SQL++ (.sqlpp) file.
-- The tool metadata must be specified with YAML inside a multi-line C-style comment.
/*
# The name of the tool must be a valid Python identifier (e.g., no spaces).
# This field is mandatory, and will be used as the name of a Python function.
name: find_high_order_item_customers_between_date

# A description for the function bound to this tool.
# This field is mandatory, and will be used in the docstring of a Python function.
description: &gt;
    Given a date range, find the customers that have placed orders where the total number of items is more than 1000.

# The inputs used to resolve the named parameters in the SQL++ query below.
# Inputs are described using a JSON object that follows the JSON schema standard.
# This field is mandatory, and will be used to build a Pydantic model.
# See https://json-schema.org/learn/getting-started-step-by-step for more info.
input: &gt;
    {
      &quot;type&quot;: &quot;object&quot;,
      &quot;properties&quot;: {
        &quot;orderdate_start&quot;: { &quot;type&quot;: &quot;string&quot; },
        &quot;orderdate_end&quot;: { &quot;type&quot;: &quot;string&quot; }
      }
    }

# The outputs used describe the structure of the SQL++ query result.
# Outputs are described using a JSON object that follows the JSON schema standard.
# This field is optional, and will be used to build a Pydantic model.
# We recommend using the &#39;INFER&#39; command to build a JSON schema from your query results.
# See https://docs.couchbase.com/server/current/n1ql/n1ql-language-reference/infer.html.
# In the future, this field will be optional (we will INFER the query automatically for you).
# output: &gt;
#     {
#       &quot;type&quot;: &quot;array&quot;,
#       &quot;items&quot;: {
#         &quot;type&quot;: &quot;object&quot;,
#         &quot;properties&quot;: {
#           &quot;cust_id&quot;: { &quot;type&quot;: &quot;string&quot; },
#           &quot;first_name&quot;: { &quot;type&quot;: &quot;string&quot; },
#           &quot;last_name&quot;: { &quot;type&quot;: &quot;string&quot; },
#           &quot;item_cnt&quot;: { &quot;type&quot;: &quot;integer&quot; }
#         }
#       }
#     }

# As a supplement to the tool similarity search, users can optionally specify search annotations.
# The values of these annotations MUST be strings (e.g., not &#39;true&#39;, but &#39;&quot;true&quot;&#39;).
# This field is optional, and does not have to be present.
annotations:
  gdpr_2016_compliant: &quot;false&quot;
  ccpa_2019_compliant: &quot;true&quot;

# The &quot;secrets&quot; field defines search keys that will be used to query a &quot;secrets&quot; manager.
# Note that these values are NOT the secrets themselves, rather they are used to lookup secrets.
secrets:

    # All Couchbase tools (e.g., semantic search, SQL++) must specify conn_string, username, and password.
    - couchbase:
        conn_string: CB_CONN_STRING
        username: CB_USERNAME
        password: CB_PASSWORD
*/

SELECT
  c.cust_id,
  c.name.first AS first_name,
  c.name.last  AS last_name,
  COUNT(*)     AS item_cnt
FROM
  customers AS c,
  orders    AS o,
  o.items   AS i
WHERE
  -- Parameters specified in the input field of the tool metadata above correspond to named parameters here.
  -- The &#39;$&#39; syntax is used to denote a named parameter.
  -- See https://docs.couchbase.com/server/current/n1ql/n1ql-rest-api/exnamed.html for more details.
  ( o.orderdate BETWEEN $orderdate_start AND $orderdate_end ) AND
  c.cust_id = o.cust_id
GROUP BY
  c.cust_id
HAVING
  COUNT(*) &gt; 1000;
</pre></div>
</div>
</section>
<section id="semantic-search-tools">
<h3>Semantic Search Tools<a class="headerlink" href="#semantic-search-tools" title="Link to this heading"></a></h3>
<p>Semantic search tools are used to search for text that is <em>semantically similar</em> to some query text.
To create a semantic search tool, you must author a <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> file with the <code class="docutils literal notranslate"><span class="pre">record_kind</span></code> field populated with
<code class="docutils literal notranslate"><span class="pre">semantic_search</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># The following file is a template for a (Couchbase) semantic search tool.</span>
<span class="c1">#</span>
<span class="n">record_kind</span><span class="p">:</span> <span class="n">semantic_search</span>

<span class="c1"># The name of the tool must be a valid Python identifier (e.g., no spaces).</span>
<span class="c1"># This field is mandatory, and will be used as the name of a Python function.</span>
<span class="n">name</span><span class="p">:</span> <span class="n">search_for_relevant_products</span>

<span class="c1"># A description for the function bound to this tool.</span>
<span class="c1"># This field is mandatory, and will be used in the docstring of a Python function.</span>
<span class="n">description</span><span class="p">:</span> <span class="o">&gt;</span>
  <span class="n">Find</span> <span class="n">product</span> <span class="n">descriptions</span> <span class="n">that</span> <span class="n">are</span> <span class="n">closely</span> <span class="n">related</span> <span class="n">to</span> <span class="n">a</span> <span class="n">collection</span> <span class="n">of</span> <span class="n">tags</span><span class="o">.</span>

<span class="c1"># The inputs used to build a comparable representation for a semantic search.</span>
<span class="c1"># Inputs are described using a JSON object that follows the JSON schema standard.</span>
<span class="c1"># This field is mandatory, and will be used to build a Pydantic model.</span>
<span class="c1"># See https://json-schema.org/learn/getting-started-step-by-step for more info.</span>
<span class="nb">input</span><span class="p">:</span> <span class="o">&gt;</span>
  <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;search_tags&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
        <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="c1"># As a supplement to the tool similarity search, users can optionally specify search annotations.</span>
<span class="c1"># The values of these annotations MUST be strings (e.g., not &#39;true&#39;, but &#39;&quot;true&quot;&#39;).</span>
<span class="c1"># This field is optional, and does not have to be present.</span>
<span class="n">annotations</span><span class="p">:</span>
  <span class="n">gdpr_2016_compliant</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span>
  <span class="n">ccpa_2019_compliant</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>

<span class="c1"># The &quot;secrets&quot; field defines search keys that will be used to query a &quot;secrets&quot; manager.</span>
<span class="c1"># Note that these values are NOT the secrets themselves, rather they are used to lookup secrets.</span>
<span class="n">secrets</span><span class="p">:</span>

  <span class="c1"># All Couchbase tools (e.g., semantic search, SQL++) must specify conn_string, username, and password.</span>
  <span class="o">-</span> <span class="n">couchbase</span><span class="p">:</span>
      <span class="n">conn_string</span><span class="p">:</span> <span class="n">CB_CONN_STRING</span>
      <span class="n">username</span><span class="p">:</span> <span class="n">CB_USERNAME</span>
      <span class="n">password</span><span class="p">:</span> <span class="n">CB_PASSWORD</span>

<span class="c1"># Couchbase semantic search tools always involve a vector search.</span>
<span class="n">vector_search</span><span class="p">:</span>

  <span class="c1"># A bucket, scope, and collection must be specified.</span>
  <span class="c1"># Semantic search across multiple collections is currently not supported.</span>
  <span class="n">bucket</span><span class="p">:</span> <span class="n">my</span><span class="o">-</span><span class="n">bucket</span>
  <span class="n">scope</span><span class="p">:</span> <span class="n">my</span><span class="o">-</span><span class="n">scope</span>
  <span class="n">collection</span><span class="p">:</span> <span class="n">my</span><span class="o">-</span><span class="n">collection</span>

  <span class="c1"># All semantic search operations require that a (FTS) vector index is built.</span>
  <span class="c1"># In the future, we will relax this constraint.</span>
  <span class="n">index</span><span class="p">:</span> <span class="n">my</span><span class="o">-</span><span class="n">vector</span><span class="o">-</span><span class="n">index</span>

  <span class="c1"># The vector_field refers to the field the vector index (above) was built on.</span>
  <span class="c1"># In the future, we will relax the constraint that an index exists on this field.</span>
  <span class="n">vector_field</span><span class="p">:</span> <span class="n">vec</span>

  <span class="c1"># The text_field is the field name used in the tool output (i.e., the results).</span>
  <span class="c1"># In the future, we will support multi-field tool outputs for semantic search.</span>
  <span class="n">text_field</span><span class="p">:</span> <span class="n">text</span>

  <span class="c1"># The embedding model used to generate the vector_field.</span>
  <span class="c1"># This embedding model field value is directly passed to sentence transformers.</span>
  <span class="c1"># In the future, we will add support for other types of embedding models.</span>
  <span class="n">embedding_model</span><span class="p">:</span> <span class="n">sentence</span><span class="o">-</span><span class="n">transformers</span><span class="o">/</span><span class="nb">all</span><span class="o">-</span><span class="n">MiniLM</span><span class="o">-</span><span class="n">L12</span><span class="o">-</span><span class="n">v2</span>
</pre></div>
</div>
</section>
<section id="http-request-tools">
<h3>HTTP Request Tools<a class="headerlink" href="#http-request-tools" title="Link to this heading"></a></h3>
<p>HTTP request tools are used to interact with external services via REST API calls.
The details on how to interface with these external services are detailed in a standard OpenAPI spec (see
<a class="reference external" href="https://swagger.io/specification/">here</a> for more details).
To create an HTTP request tool, you must author a <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> file with the <code class="docutils literal notranslate"><span class="pre">record_kind</span></code> field populated with
<code class="docutils literal notranslate"><span class="pre">http_request</span></code>.
One tool is generated per specified endpoint.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># The following file is a template for a set of HTTP request tools.</span>
<span class="c1">#</span>
<span class="n">record_kind</span><span class="p">:</span> <span class="n">http_request</span>

<span class="c1"># As a supplement to the tool similarity search, users can optionally specify search annotations.</span>
<span class="c1"># The values of these annotations MUST be strings (e.g., not &#39;true&#39;, but &#39;&quot;true&quot;&#39;).</span>
<span class="c1"># This field is optional, and does not have to be present.</span>
<span class="n">annotations</span><span class="p">:</span>
  <span class="n">gdpr_2016_compliant</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span>
  <span class="n">ccpa_2019_compliant</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>

<span class="c1"># HTTP requests must be specified using an OpenAPI spec.</span>
<span class="n">open_api</span><span class="p">:</span>

  <span class="c1"># The path relative to the tool-calling code.</span>
  <span class="c1"># The OpenAPI spec can either be in JSON or YAML.</span>
  <span class="n">filename</span><span class="p">:</span> <span class="n">path_to_openapi_spec</span><span class="o">.</span><span class="n">json</span>

  <span class="c1"># A URL denoting where to retrieve the OpenAPI spec.</span>
  <span class="c1"># The filename or the url must be specified (not both).</span>
  <span class="c1"># url: http://url_to_openapi_spec/openapi.json</span>

  <span class="c1"># Which OpenAPI operations should be indexed as tools are specified below.</span>
  <span class="c1"># This field is mandatory, and each operation is validated against the spec on index.</span>
  <span class="n">operations</span><span class="p">:</span>

    <span class="c1"># All operations must specify a path and a method.</span>
    <span class="c1"># 1. The path corresponds to an OpenAPI path object.</span>
    <span class="c1"># 2. The method corresponds to GET/POST/PUT/PATCH/DELETE/HEAD/OPTIONS/TRACE.</span>
    <span class="c1"># See https://swagger.io/specification/#path-item-object for more information.</span>
    <span class="o">-</span> <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">create</span>
      <span class="n">method</span><span class="p">:</span> <span class="n">post</span>
    <span class="o">-</span> <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">delete</span><span class="o">/</span><span class="p">{</span><span class="n">user_id</span><span class="p">}</span>
      <span class="n">method</span><span class="p">:</span> <span class="n">delete</span>
</pre></div>
</div>
</section>
</section>
<section id="prompt-catalog-records">
<h2>Prompt Catalog Records<a class="headerlink" href="#prompt-catalog-records" title="Link to this heading"></a></h2>
<p>Prompts in Agent Catalog are more than just a hunk of text: they also contain metadata that help developers build
agents faster.
These prompts can be a part of a larger workflow (e.g., as a nested prompt within an agent framework) or as a standalone
set of instructions.
Agent Catalog currently supports two types of prompts: raw prompts and Jinja templated prompts.</p>
<section id="raw-prompts">
<h3>Raw Prompts<a class="headerlink" href="#raw-prompts" title="Link to this heading"></a></h3>
<p>Raw prompts are static, predefined text-based instructions used to guide your agent’s actions.
Raw prompts are written directly as plain text without any dynamic elements.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="c1">#</span>
<span class="c1"># The following file is a template for a raw prompt.</span>
<span class="c1">#</span>
<span class="c1"># The content in between the &#39;---&#39; lines must be valid YAML.</span>
<span class="n">record_kind</span><span class="p">:</span> <span class="n">raw_prompt</span>

<span class="c1"># The name of the prompt must be a valid Python identifier (e.g., no spaces).</span>
<span class="c1"># This field is mandatory, and will be used when searching for prompts by name.</span>
<span class="n">name</span><span class="p">:</span> <span class="n">route_finding_prompt</span>

<span class="c1"># A description of the prompt&#39;s purpose (e.g., where this prompt will be used).</span>
<span class="c1"># This field is mandatory, and will be used (indirectly) when performing semantic search for prompts.</span>
<span class="n">description</span><span class="p">:</span> <span class="o">&gt;</span>
    <span class="n">Instructions</span> <span class="n">on</span> <span class="n">how</span> <span class="n">to</span> <span class="n">find</span> <span class="n">routes</span> <span class="n">between</span> <span class="n">airports</span><span class="o">.</span>

<span class="c1"># As a supplement to the description similarity search, users can optionally specify search annotations.</span>
<span class="c1"># The values of these annotations MUST be strings (e.g., not &#39;true&#39;, but &#39;&quot;true&quot;&#39;).</span>
<span class="c1"># This field is optional, and does not have to be present.</span>
<span class="n">annotations</span><span class="p">:</span>
  <span class="n">organization</span><span class="p">:</span> <span class="s2">&quot;sequoia&quot;</span>

<span class="c1"># A prompt is _generally_ (more often than not) associated with a small collection of tools.</span>
<span class="c1"># This field is used at provider time to search the catalog for tools.</span>
<span class="c1"># This field is optional, and does not have to be present.</span>
<span class="n">tools</span><span class="p">:</span>
  <span class="c1"># Tools can be specified using the same parameters found in Provider.get_tools_for.</span>
  <span class="c1"># For instance, we can condition on the tool name...</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;find_indirect_routes&quot;</span>

  <span class="c1"># ...the tool name and some annotations...</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;find_direct_routes&quot;</span>
    <span class="n">annotations</span><span class="p">:</span> <span class="n">gdpr_2016_compliant</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>

  <span class="c1"># ...or even a semantic search via the tool description.</span>
  <span class="o">-</span> <span class="n">query</span><span class="p">:</span> <span class="s2">&quot;finding flights by name&quot;</span>
    <span class="n">limit</span><span class="p">:</span> <span class="mi">2</span>

<span class="c1"># Below the &#39;---&#39; represents the prompt in its entirety.</span>
<span class="o">---</span>
<span class="n">Goal</span><span class="p">:</span>
<span class="n">Your</span> <span class="n">goal</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">find</span> <span class="n">a</span> <span class="n">sequence</span> <span class="n">of</span> <span class="n">routes</span> <span class="n">between</span> <span class="n">the</span> <span class="n">source</span> <span class="ow">and</span> <span class="n">destination</span> <span class="n">airport</span><span class="o">.</span>

<span class="n">Examples</span><span class="p">:</span>
<span class="o">...</span>

<span class="n">Instructions</span><span class="p">:</span>
<span class="n">Try</span> <span class="n">to</span> <span class="n">find</span> <span class="n">a</span> <span class="n">direct</span> <span class="n">routes</span> <span class="n">first</span> <span class="n">between</span> <span class="n">the</span> <span class="n">source</span> <span class="n">airport</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">destination</span> <span class="n">airport</span><span class="o">.</span>
<span class="n">If</span> <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">direct</span> <span class="n">routes</span><span class="p">,</span> <span class="n">then</span> <span class="n">find</span> <span class="n">a</span> <span class="n">one</span><span class="o">-</span><span class="n">layover</span> <span class="n">route</span><span class="o">.</span>
<span class="n">If</span> <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">such</span> <span class="n">routes</span><span class="p">,</span> <span class="n">then</span> <span class="k">try</span> <span class="n">another</span> <span class="n">source</span> <span class="n">airport</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">close</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="jinja-templated-prompts">
<h3>Jinja Templated Prompts<a class="headerlink" href="#jinja-templated-prompts" title="Link to this heading"></a></h3>
<p>In contrast to raw prompts, Jinja templated prompts enable users to author dynamic prompts that can be rendered at
runtime.
If you are working without an agent framework, Jinja templated prompts might make more sense for your use case.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="c1">#</span>
<span class="c1"># The following file is a template for a Jinja2 prompt.</span>
<span class="c1">#</span>
<span class="c1"># The content in between the &#39;---&#39; lines must be valid YAML.</span>
<span class="n">record_kind</span><span class="p">:</span> <span class="n">jinja_prompt</span>

<span class="c1"># The name of the prompt must be a valid Python identifier (e.g., no spaces).</span>
<span class="c1"># This field is mandatory, and will be used when searching for prompts by name.</span>
<span class="n">name</span><span class="p">:</span> <span class="n">route_finding_prompt</span>

<span class="c1"># A description of the prompt&#39;s purpose (e.g., where this prompt will be used).</span>
<span class="c1"># This field is mandatory, and will be used (indirectly) when performing semantic search for prompts.</span>
<span class="n">description</span><span class="p">:</span> <span class="o">&gt;</span>
    <span class="n">Instructions</span> <span class="n">on</span> <span class="n">how</span> <span class="n">to</span> <span class="n">find</span> <span class="n">routes</span> <span class="n">between</span> <span class="n">two</span> <span class="n">specific</span> <span class="n">airports</span><span class="o">.</span>

<span class="c1"># As a supplement to the description similarity search, users can optionally specify search annotations.</span>
<span class="c1"># The values of these annotations MUST be strings (e.g., not &#39;true&#39;, but &#39;&quot;true&quot;&#39;).</span>
<span class="c1"># This field is optional, and does not have to be present.</span>
<span class="n">annotations</span><span class="p">:</span>
  <span class="n">organization</span><span class="p">:</span> <span class="s2">&quot;sequoia&quot;</span>

<span class="c1"># A prompt is _generally_ (more often than not) associated with a small collection of tools.</span>
<span class="c1"># This field is used at provider time to search the catalog for tools.</span>
<span class="c1"># This field is optional, and does not have to be present.</span>
<span class="n">tools</span><span class="p">:</span>
  <span class="c1"># Tools can be specified using the same parameters found in Provider.get_tools_for.</span>
  <span class="c1"># For instance, we can condition on the tool name...</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;find_indirect_routes&quot;</span>

  <span class="c1"># ...the tool name and some annotations...</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;find_direct_routes&quot;</span>
    <span class="n">annotations</span><span class="p">:</span> <span class="n">gdpr_2016_compliant</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>

  <span class="c1"># ...or even a semantic search via the tool description.</span>
  <span class="o">-</span> <span class="n">query</span><span class="p">:</span> <span class="s2">&quot;finding flights by name&quot;</span>
    <span class="n">limit</span><span class="p">:</span> <span class="mi">2</span>

<span class="c1"># Below the &#39;---&#39; represents the prompt in its entirety.</span>
<span class="o">---</span>
<span class="n">Goal</span><span class="p">:</span>
<span class="n">Your</span> <span class="n">goal</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">find</span> <span class="n">a</span> <span class="n">sequence</span> <span class="n">of</span> <span class="n">routes</span> <span class="n">between</span> <span class="n">the</span> <span class="n">source</span> <span class="ow">and</span> <span class="n">destination</span> <span class="n">airport</span><span class="o">.</span>

<span class="n">Source</span> <span class="n">Airport</span><span class="p">:</span>
<span class="p">{{</span> <span class="n">source_airport</span> <span class="p">}}</span>

<span class="n">Destination</span> <span class="n">Airport</span>
<span class="p">{{</span> <span class="n">destination_airport</span> <span class="p">}}</span>

<span class="n">Examples</span><span class="p">:</span>
<span class="o">...</span>

<span class="n">Instructions</span><span class="p">:</span>
<span class="n">Try</span> <span class="n">to</span> <span class="n">find</span> <span class="n">a</span> <span class="n">direct</span> <span class="n">routes</span> <span class="n">first</span> <span class="n">between</span> <span class="n">the</span> <span class="n">source</span> <span class="n">airport</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">destination</span> <span class="n">airport</span><span class="o">.</span>
<span class="n">If</span> <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">direct</span> <span class="n">routes</span><span class="p">,</span> <span class="n">then</span> <span class="n">find</span> <span class="n">a</span> <span class="n">one</span><span class="o">-</span><span class="n">layover</span> <span class="n">route</span><span class="o">.</span>
<span class="n">If</span> <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">such</span> <span class="n">routes</span><span class="p">,</span> <span class="n">then</span> <span class="k">try</span> <span class="n">another</span> <span class="n">source</span> <span class="n">airport</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">close</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="env.html" class="btn btn-neutral float-left" title="Agent Catalog Environment Variables" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="faqs.html" class="btn btn-neutral float-right" title="Frequently Asked Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Couchbase.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>